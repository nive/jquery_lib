/**
 * (c) 2013-2015 Nive GmbH - www.nive.co
 * 
 * jq-nive v0.7.1
 * http://www.nive.co
 * 
 * License: MIT
 */
"use strict";window.nive=window.nive||{},nive.endpoint=nive.endpoint||{},function(){nive.endpoint.apiUrl=function(t){return t=t||{},nive.endpoint.__makeUrl(t,!0)},nive.endpoint.widgetUrl=function(t){return t=t||{},t.version="widgets",nive.endpoint.__makeUrl(t)},nive.endpoint.EndpointException=function(t){this.message=t,this.name="EndpointException"},nive.endpoint.__makeUrl=function(t){t=t||{};var n=".nive.io",i="http://127.0.0.1:5556",e="__domain",s="__proxy",o=t.protocol||document.location.protocol;t.secure?o="https:":o.indexOf(":")!=o.length-1&&(o+=":");var r=t.domain||"";r&&(r=-1==r.indexOf(".")?r+n:r);var a=t.version||"api",d=t.method,p=t.outpost||i,u=0==window.location.href.indexOf(p)?9:0,h=t.path;if(h){if(0==h.indexOf("./")||0==h.indexOf("../"))return h.lastIndexOf("/")!=h.length-1&&(h+="/"),h+d;0==h.indexOf("/")&&(h=h.substr(1,h.length)),h.lastIndexOf("/")==h.length-1&&(h=h.substr(0,h.length-1))}if(!t.name&&!t.relative)throw"Invalid service name";var f=t.name||"",c="";if(9==u){if(""==f)throw"Service name required in development mode";""==r&&(r=e),c=p+"/"+s+"/"+r}else r&&(c=o+"//"+r);return c+="/"+f,a&&(c+="/"+a),h&&(c+="/"+h),d&&(c+="/"+d),c}}(),window.nive=window.nive||{},nive.User=nive.User||{},function(){nive.User=function(t){return t=t||{},t.name="users",this.options=t,this.token=function(t,n){return this._send("token",t,n)},this.signin=function(t,n){return this._send("signin",t,n)},this.signout=function(t){return this._send("signout",{},t)},this.identity=function(t){return this._send("identity",{},t)},this.name=function(t){return this._send("name",{},t)},this.profile=function(t){return this._send("profile",{},t)},this.authenticated=function(t,n){return"[object Array]"==Object.prototype.toString.call(t)&&(t={groups:t}),("string"==typeof t||t instanceof String)&&(t={groups:[t]}),this._send("authenticated",t,n)},this.signup=function(t,n){return this._send("signup",t,n)},this.signup2=function(t,n){return("string"==typeof t||t instanceof String)&&(t={token:t}),this._send("signup2",t,n)},this.update=function(t,n){return this._send("update",t,n)},this.updatePassword=function(t,n){return this._send("updatePassword",t,n)},this.updateEmail=function(t,n){return("string"==typeof t||t instanceof String)&&(t={email:t}),this._send("updateEmail",t,n)},this.updateEmail2=function(t,n){return("string"==typeof t||t instanceof String)&&(t={token:t}),this._send("updateEmail2",t,n)},this.resetPassword=function(t,n){return("string"==typeof t||t instanceof String)&&(t={identity:t}),this._send("resetPassword",t,n)},this.resetPassword2=function(t,n){return this._send("resetPassword2",t,n)},this._send=function(t,n,i){if("undefined"==typeof jQuery)throw"Sorry, jQuery required!";this.options.method=t,this.options.version="api";var e=nive.endpoint.apiUrl(this.options);return i=i||{},i.data=JSON.stringify(n),i.dataType="json",i.contentType="application/json",this.options.token&&(i.headers?i.headers["x-auth-token"]=this.options.token:i.headers={"x-auth-token":this.options.token}),i.type||(i.type=n?"POST":"GET"),$.ajax(e,i)},this}}(),window.nive=window.nive||{},nive.FileHost=nive.FileHost||{},function(){nive.FileHost=function(t){return t=t||{},("string"==typeof t||t instanceof String)&&(t={name:t}),this.options=t,this.list=function(t,n){return("string"==typeof t||t instanceof String)&&(t={path:t}),this._send("@list",t,n)},this.details=function(t,n){return("string"==typeof t||t instanceof String)&&(t={path:t}),this._send("@details",t,n)},this.properties=function(t,n){return("string"==typeof t||t instanceof String)&&(t={path:t}),this._send("@properties",t,n)},this._send=function(t,n,i){if("undefined"==typeof jQuery)throw"Sorry, jQuery required!";this.options.method=t,this.options.version="",n&&n.path&&(this.options.path=n.path);var e=nive.endpoint.apiUrl(this.options);return i=i||{},i.data=JSON.stringify(n),i.dataType="json",i.contentType="application/json",this.options.token&&(i.headers?i.headers["x-auth-token"]=this.options.token:i.headers={"x-auth-token":this.options.token}),i.type||(i.type=n?"POST":"GET"),$.ajax(e,i)},this}}();
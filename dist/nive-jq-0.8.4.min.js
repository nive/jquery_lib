// (c) 2013-2016 Nive GmbH - nive.io
// 
// nive-jq v0.8.4
// 
// License: Released under MIT-License. See http://jquery.org/license
// Docs: http://www.nive.co/docs/webapi
//
window.nive=window.nive||{},nive.endpoint=nive.endpoint||{},function(){"use strict";nive.endpoint.makeUrl=function(t,n){t=t||{};var i=".nive.io",e="https";0==t.secure?e="http:":e.indexOf(":")!=e.length-1&&(e+=":");var s=t.domain||"";s&&(s=-1==s.indexOf(".")?s+i:s);var o=t.version||"api",r=t.method,h=n;if(h||t.path){if(h?t.path&&0==!h.indexOf("/")&&(t.path.lastIndexOf("/")!=h.length-1&&(h="/"+h),h=t.path+h):h=t.path,0==h.indexOf("./")||0==h.indexOf("../"))return r?(h.lastIndexOf("/")!=h.length-1&&(h+="/"),h+r):h;0==h.indexOf("/")&&(h=h.substr(1,h.length)),h.lastIndexOf("/")==h.length-1&&(h=h.substr(0,h.length-1))}if(!t.service)throw"Invalid service name";var u=t.service||"",d="";return s&&(d=e+"//"+s),d+="/"+u,o&&(d+="/"+o),h&&(d+="/"+h),r&&(d+="/"+r),d},nive.endpoint.EndpointException=function(t){this.message=t,this.name="EndpointException"}}(),window.nive=window.nive||{},nive.User=nive.User||{},function(){"use strict";nive.User=function(t){return this.__options=t||{},("string"==typeof t||t instanceof String)&&(this.__options={service:t}),this.__options.service="users",this.options=function(t,n){if("string"==typeof t||t instanceof String){if(void 0==n)return this.__options[t];this.__options[t]=n}else this.__options=t;return this.__options},this.token=function(t,n){return this._send("token",t,n)},this.signin=function(t,n){return this._send("signin",t,n)},this.signout=function(t){return this._send("signout",{},t)},this.identity=function(t){return this._send("identity",{},t)},this.name=function(t){return this._send("name",{},t)},this.profile=function(t){return this._send("profile",{},t)},this.authenticated=function(t,n){return"[object Array]"==Object.prototype.toString.call(t)&&(t={groups:t}),("string"==typeof t||t instanceof String)&&(t={groups:[t]}),this._send("authenticated",t,n)},this.update=function(t,n){return this._send("update",t,n)},this.updatePassword=function(t,n){return this._send("updatePassword",t,n)},this.updateEmail=function(t,n){return("string"==typeof t||t instanceof String)&&(t={email:t}),this._send("updateEmail",t,n)},this.verifyEmail=function(t,n){return("string"==typeof t||t instanceof String)&&(t={email:t}),this._send("verifyEmail",t,n)},this.verifyEmail2=function(t,n){return("string"==typeof t||t instanceof String)&&(t={token:t}),this._send("verifyEmail2",t,n)},this.resetPassword=function(t,n){return("string"==typeof t||t instanceof String)&&(t={identity:t}),this._send("resetPassword",t,n)},this.resetPassword2=function(t,n){return this._send("resetPassword2",t,n)},this.message=function(t,n){return this._send("message",t,n)},this.disable=function(t,n){return this._send("disable",t,n)},this["delete"]=function(t,n){return this._send("delete",t,n)},this.signupDirect=function(t,n){return this._send("signupDirect",t,n)},this.signupOptin=function(t,n){return this._send("signupOptin",t,n)},this.signupReview=function(t,n){return this._send("signupReview",t,n)},this.signupSendpw=function(t,n){return this._send("signupSendpw",t,n)},this.signupUid=function(t,n){return this._send("signupUid",t,n)},this.activate=function(t,n){return("string"==typeof t||t instanceof String)&&(t={token:t}),this._send("activate",t,n)},this.review=function(t,n){return this._send("review",t,n)},this.getUser=function(t,n){return("string"==typeof t||t instanceof String)&&(t={identity:t}),this._send("getUser",t,n)},this.setUser=function(t,n){return this._send("setUser",t,n)},this.removeUser=function(t,n){return("string"==typeof t||t instanceof String)&&(t={identity:t}),this._send("removeUser",t,n)},this.list=function(t,n){return this._send("list",t,n)},this._send=function(t,n,i){if("undefined"==typeof jQuery)throw"Sorry, jQuery required!";this.__options.method=t,this.__options.version="api";var e=nive.endpoint.makeUrl(this.__options);return i=i||{},i.data=JSON.stringify(n),i.dataType="json",i.contentType="application/json",this.__options.token&&(i.headers?i.headers["x-auth-token"]=this.__options.token:i.headers={"x-auth-token":this.__options.token}),i.type||(i.type=n?"POST":"GET"),$.ajax(e,i)},this}}(),window.nive=window.nive||{},nive.KvStore=nive.KvStore||{},function(){"use strict";nive.KvStore=function(t){return this.__options=t||{},("string"==typeof t||t instanceof String)&&(this.__options={service:t}),this.options=function(t,n){if("string"==typeof t||t instanceof String){if(void 0==n)return this.__options[t];this.__options[t]=n}else this.__options=t;return this.__options},this.getItem=function(t,n){return("string"==typeof t||t instanceof String)&&(t={key:t}),this._send("getItem",t,n)},this.newItem=function(t,n){return"[object Array]"==Object.prototype.toString.call(t)&&(t={items:t}),this._send("newItem",t,n)},this.setItem=function(t,n){return"[object Array]"==Object.prototype.toString.call(t)&&(t={items:t}),this._send("setItem",t,n)},this.removeItem=function(t,n){return("string"==typeof t||t instanceof String)&&(t={key:t}),this._send("removeItem",t,n)},this.list=function(t,n){return this._send("list",t,n)},this.keys=function(t,n){return this._send("keys",t,n)},this._send=function(t,n,i){if("undefined"==typeof jQuery)throw"Sorry, jQuery required!";this.__options.method=t,this.__options.version="api";var e=nive.endpoint.makeUrl(this.__options);return i=i||{},i.data=JSON.stringify(n),i.dataType="json",i.contentType="application/json",this.__options.token&&(i.headers?i.headers["x-auth-token"]=this.__options.token:i.headers={"x-auth-token":this.__options.token}),i.type||(i.type=n?"POST":"GET"),$.ajax(e,i)},this}}(),window.nive=window.nive||{},nive.FileStore=nive.FileStore||{},function(){"use strict";nive.FileStore=function(t){return this.__options=t||{},("string"==typeof t||t instanceof String)&&(this.__options={service:t}),this.options=function(t,n){if("string"==typeof t||t instanceof String){if(void 0==n)return this.__options[t];this.__options[t]=n}else this.__options=t;return this.__options},this.getItem=function(t,n){return("string"==typeof t||t instanceof String)&&(t={path:t}),this._send("@getItem",t,n)},this.newItem=function(t,n){return this._send("@newItem",t,n)},this.setItem=function(t,n){return this._send("@setItem",t,n)},this.removeItem=function(t,n){return this._send("@removeItem",t,n)},this.read=function(t,n){return("string"==typeof t||t instanceof String)&&(t={path:t}),this._send("@read",t,n)},this.write=function(t,n){return this._send("@write",t,n)},this.move=function(t,n){return this._send("@move",t,n)},this.list=function(t,n){return this._send("@list",t,n)},this.allowed=function(t,n){return this._send("@allowed",t,n)},this.getPermissions=function(t,n){return("string"==typeof t||t instanceof String)&&(t={path:t}),this._send("@getPermissions",t,n)},this.setPermissions=function(t,n){return this._send("@setPermissions",t,n)},this.getOwner=function(t,n){return("string"==typeof t||t instanceof String)&&(t={path:t}),this._send("@getOwner",t,n)},this.setOwner=function(t,n){return this._send("@setOwner",t,n)},this.ping=function(t,n){return t=t||{},t.path="/",this._send("@ping",t,n)},this._send=function(t,n,i){if("undefined"==typeof jQuery)throw"Sorry, jQuery required!";this.__options.method=t,this.__options.version="";var e=null;n&&n.path&&(e=n.path);var s=nive.endpoint.makeUrl(this.__options,e);return i=i||{},i.data=JSON.stringify(n),i.dataType="json",i.contentType="application/json",this.__options.token&&(i.headers?i.headers["x-auth-token"]=this.__options.token:i.headers={"x-auth-token":this.__options.token}),i.type||(i.type=n?"POST":"GET"),$.ajax(s,i)},this}}();